<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Push-Up Performance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#050812;
  --panel:#0b1426;
  --card:#0f1d34;
  --border:rgba(255,255,255,.08);
  --text:#eaf1ff;
  --muted:#9fb0d0;
  --green:#31d07c;
  --greenLight:#6bffb2;
  --amber:#f5b942;
  --blue:#2b66ff;
  --glow:0 0 24px rgba(49,208,124,.25);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:
    radial-gradient(800px 400px at 50% -200px,#0e1b36 0%,var(--bg) 55%);
  color:var(--text);
}
header{padding:22px}
h1{margin:0;font-size:26px}
.sub{margin-top:6px;color:var(--muted);font-size:13px}
button{
  background:linear-gradient(180deg,#3a7bff,#2b66ff);
  color:#fff;border:none;border-radius:14px;
  padding:10px 16px;font-weight:600;
}
.section{padding:0 16px;margin-top:22px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:14px}
.card{
  background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(0,0,0,.1)),var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  box-shadow:0 10px 35px rgba(0,0,0,.45);
}
.label{color:var(--muted);font-size:11px;letter-spacing:.12em}
.value{margin-top:8px;font-size:32px;font-weight:800;color:var(--green)}
canvas{
  width:100%;
  background:linear-gradient(180deg,#0b1426,#060b14);
  border-radius:18px;
  border:1px solid var(--border);
}
footer{margin:20px 16px;color:var(--muted);font-size:12px}
</style>
</head>

<body>

<header>
  <h1>Push-Up Performance</h1>
  <div class="sub">Live â€¢ Read-only â€¢ Visual Analytics</div>
  <button onclick="loadData()">Refresh</button>
</header>

<section class="section grid">
  <div class="card"><div class="label">TOTAL REPS</div><div class="value" id="totalReps">â€”</div></div>
  <div class="card"><div class="label">WORKOUTS</div><div class="value" id="workouts">â€”</div></div>
  <div class="card"><div class="label">BEST DAY</div><div class="value" id="bestDay">â€”</div></div>
  <div class="card"><div class="label">BEST WEEK</div><div class="value" id="bestWeek">â€”</div></div>
</section>

<section class="section">
  <h2>ðŸ“Š Weekly Trend</h2>
  <canvas id="weeklyTrend" height="220"></canvas>
</section>

<section class="section">
  <h2>ðŸ“ˆ Daily Performance (Gradient)</h2>
  <canvas id="dailyGradient" height="260"></canvas>
</section>

<footer id="status">Idle</footer>

<script>
const DATA_URL="https://script.google.com/macros/s/AKfycbxCYLXUKDsKNGhHUQzh_135yHk0j5lZ9JJZdJpxGiOEu66HndjWqQMWRBd7XZBIpCec/exec";
let data=[];

function loadData(){
 fetch(DATA_URL+"?t="+Date.now())
 .then(r=>r.json())
 .then(j=>{data=j;render();});
}

function render(){
 const byDay={},byWeek={};
 data.forEach(r=>{
  byDay[r.date]=(byDay[r.date]||0)+r.reps;
  const d=new Date(r.date+"T00:00");
  d.setDate(d.getDate()-(d.getDay()+6)%7);
  const w=d.toISOString().slice(0,10);
  byWeek[w]=(byWeek[w]||0)+r.reps;
 });

 totalReps.textContent=data.reduce((s,r)=>s+r.reps,0);
 workouts.textContent=data.length;
 bestDay.textContent=Math.max(...Object.values(byDay));
 bestWeek.textContent=Math.max(...Object.values(byWeek));

 drawWeeklyTrend(byWeek);
 drawDailyGradient(byDay);
 status.textContent="Updated";
}

/* -------- Weekly Trend (simple line) -------- */
function drawWeeklyTrend(byWeek){
 const c=weeklyTrend,x=c.getContext("2d");
 x.clearRect(0,0,c.width,c.height);
 const e=Object.entries(byWeek).sort((a,b)=>a[0].localeCompare(b[0])).slice(-8);
 if(e.length<2)return;
 const v=e.map(i=>i[1]);
 const max=Math.max(...v),min=Math.min(...v);
 x.strokeStyle="#31d07c";x.lineWidth=3;x.beginPath();
 v.forEach((n,i)=>{
  const px=i*(c.width/(v.length-1));
  const py=c.height-((n-min)/(max-min||1))*c.height;
  i?x.lineTo(px,py):x.moveTo(px,py);
 });
 x.stroke();
}

/* -------- Gradient Daily Chart -------- */
function drawDailyGradient(byDay){
 const c=dailyGradient,ctx=c.getContext("2d");
 ctx.clearRect(0,0,c.width,c.height);

 const entries=Object.entries(byDay).sort((a,b)=>a[0].localeCompare(b[0])).slice(-30);
 if(entries.length<2)return;

 const values=entries.map(e=>e[1]);
 const max=Math.max(...values),min=Math.min(...values);
 const pad=24;
 const w=c.width-pad*2;
 const h=c.height-pad*2;

 // gradient stroke
 const grad=ctx.createLinearGradient(0,pad+h,0,pad);
 grad.addColorStop(0,"#145c3a");
 grad.addColorStop(1,"#6bffb2");

 ctx.strokeStyle=grad;
 ctx.lineWidth=4;
 ctx.lineJoin="round";
 ctx.lineCap="round";
 ctx.beginPath();

 values.forEach((v,i)=>{
  const x=pad+(i/(values.length-1))*w;
  const y=pad+h-((v-min)/(max-min||1))*h;
  i?ctx.lineTo(x,y):ctx.moveTo(x,y);
 });
 ctx.stroke();

 // subtle fill glow
 ctx.globalAlpha=0.15;
 ctx.fillStyle=grad;
 ctx.lineTo(pad+w,pad+h);
 ctx.lineTo(pad,pad+h);
 ctx.closePath();
 ctx.fill();
 ctx.globalAlpha=1;
}

loadData();
</script>
</body>
</html>
