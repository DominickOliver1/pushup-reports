<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Push-Up Performance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#050812;
  --panel:#0b1426;
  --card:#0f1d34;
  --border:rgba(255,255,255,.08);
  --text:#eaf1ff;
  --muted:#9fb0d0;
  --green:#31d07c;
  --amber:#f5b942;
  --blue:#2b66ff;
  --glow:0 0 24px rgba(49,208,124,.25);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:
    radial-gradient(800px 400px at 50% -200px,#0e1b36 0%,var(--bg) 55%),
    linear-gradient(#04070e,#050812);
  color:var(--text);
}

/* ---------- HEADER ---------- */
header{
  padding:22px 20px 10px;
}
header h1{
  margin:0;
  font-size:28px;
  letter-spacing:.4px;
}
header .sub{
  margin-top:6px;
  color:var(--muted);
  font-size:13px;
}
header .actions{
  margin-top:14px;
}
button{
  background:linear-gradient(180deg,#3a7bff,#2b66ff);
  color:#fff;
  border:none;
  border-radius:14px;
  padding:10px 16px;
  font-weight:600;
  box-shadow:0 6px 20px rgba(43,102,255,.35);
}

/* ---------- LAYOUT ---------- */
.section{
  margin-top:18px;
  padding:0 16px;
}
.section h2{
  margin:0 0 10px;
  font-size:18px;
  letter-spacing:.3px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:14px;
}

/* ---------- CARDS ---------- */
.card{
  background:
    linear-gradient(180deg,rgba(255,255,255,.04),rgba(0,0,0,.1)),
    var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  box-shadow:0 10px 35px rgba(0,0,0,.45);
}
.card .label{
  color:var(--muted);
  font-size:11px;
  letter-spacing:.12em;
}
.card .value{
  margin-top:8px;
  font-size:34px;
  font-weight:800;
  color:var(--green);
}
.card.small .value{
  font-size:20px;
}

/* ---------- GOAL ---------- */
.goalBox{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
}
.goalRow{
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
.goalRow input{
  flex:1;
  background:#070c17;
  color:#fff;
  border:1px solid var(--border);
  border-radius:12px;
  padding:8px 10px;
}
.progress{
  height:12px;
  background:#070c17;
  border-radius:12px;
  overflow:hidden;
}
.progress div{
  height:100%;
  background:linear-gradient(90deg,#31d07c,#3cff9d);
  box-shadow:var(--glow);
  transition:width .4s ease;
}

/* ---------- TREND ---------- */
canvas{
  width:100%;
  background:
    linear-gradient(180deg,#0b1426,#060b14);
  border-radius:18px;
  border:1px solid var(--border);
}

/* ---------- CALENDAR ---------- */
.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}
.day{
  height:66px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#081020;
  padding:6px;
  position:relative;
}
.day .num{
  font-size:11px;
  color:var(--muted);
}
.day .sum{
  position:absolute;
  right:6px;
  bottom:6px;
  font-weight:800;
}

/* ---------- ACHIEVEMENTS ---------- */
.badge{
  background:#070c17;
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  text-align:center;
  opacity:.35;
}
.badge.unlocked{
  opacity:1;
  background:
    linear-gradient(180deg,rgba(49,208,124,.18),rgba(0,0,0,.15)),
    #0b1a2b;
  border-color:rgba(49,208,124,.5);
  box-shadow:var(--glow);
}
.badge .big{
  font-size:22px;
  font-weight:800;
  color:var(--green);
}

/* ---------- FOOTER ---------- */
footer{
  margin:20px 16px;
  color:var(--muted);
  font-size:12px;
}
</style>
</head>

<body>

<header>
  <h1>Push-Up Performance</h1>
  <div class="sub">Live analytics ‚Ä¢ Read-only</div>
  <div class="actions">
    <button onclick="loadData()">Refresh Data</button>
  </div>
</header>

<section class="section">
  <div class="grid">
    <div class="card"><div class="label">TOTAL REPS</div><div class="value" id="totalReps">‚Äî</div></div>
    <div class="card"><div class="label">WORKOUTS</div><div class="value" id="workouts">‚Äî</div></div>
    <div class="card"><div class="label">BEST DAY</div><div class="value" id="bestDay">‚Äî</div></div>
    <div class="card"><div class="label">BEST WEEK</div><div class="value" id="bestWeek">‚Äî</div></div>
  </div>
</section>

<section class="section">
  <h2>üéØ Daily Goal</h2>
  <div class="goalBox">
    <div class="goalRow">
      <input type="number" id="goalInput">
      <button onclick="saveGoal()">Save</button>
    </div>
    <div class="progress"><div id="goalBar"></div></div>
    <div class="sub" id="goalText"></div>
  </div>
</section>

<section class="section">
  <h2>üìä Weekly Trend</h2>
  <canvas id="trend" height="220"></canvas>
</section>

<section class="section">
  <h2>üìÖ Calendar</h2>
  <div class="calendar" id="calendar"></div>
  <div class="sub" id="dayDetails"></div>
</section>

<section class="section">
  <h2>üèÜ Achievements</h2>
  <div class="grid" id="achievements"></div>
</section>

<footer id="status">Idle</footer>

<script>
/* ---- SAME LOGIC YOU ALREADY HAVE ---- */
const DATA_URL="https://script.google.com/macros/s/AKfycbxCYLXUKDsKNGhHUQzh_135yHk0j5lZ9JJZdJpxGiOEu66HndjWqQMWRBd7XZBIpCec/exec";
let data=[],goal=Number(localStorage.goal)||50;
goalInput.value=goal;

function saveGoal(){goal=Number(goalInput.value||50);localStorage.goal=goal;render();}
function loadData(){fetch(DATA_URL+"?t="+Date.now()).then(r=>r.json()).then(j=>{data=j;render();});}

function render(){
 const total=data.reduce((s,r)=>s+r.reps,0);
 totalReps.textContent=total;
 workouts.textContent=data.length;

 const byDay={},byWeek={};
 data.forEach(r=>{
  byDay[r.date]=(byDay[r.date]||0)+r.reps;
  const d=new Date(r.date+"T00:00");
  d.setDate(d.getDate()-(d.getDay()+6)%7);
  const w=d.toISOString().slice(0,10);
  byWeek[w]=(byWeek[w]||0)+r.reps;
 });

 bestDay.textContent=Math.max(...Object.values(byDay));
 bestWeek.textContent=Math.max(...Object.values(byWeek));

 renderGoal(byDay);
 drawCalendar(byDay);
 drawTrend(byWeek);
 renderAchievements(total);

 status.textContent="Updated";
}

/* ---- rest unchanged ---- */
function renderGoal(byDay){
 const t=new Date().toISOString().slice(0,10);
 const v=byDay[t]||0;
 goalBar.style.width=Math.min(v/goal*100,100)+"%";
 goalText.textContent=`${v} / ${goal} reps`;
}

function drawCalendar(byDay){
 calendar.innerHTML=""; dayDetails.textContent="";
 const d=new Date(),y=d.getFullYear(),m=d.getMonth();
 for(let i=1;i<=new Date(y,m+1,0).getDate();i++){
  const iso=`${y}-${String(m+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`;
  const v=byDay[iso]||0;
  const el=document.createElement("div");
  el.className="day";
  el.style.background=`rgba(49,208,124,${Math.min(v/100,.6)})`;
  el.innerHTML=`<div class="num">${i}</div><div class="sum">${v||""}</div>`;
  el.onclick=()=>dayDetails.textContent=`${iso}: ${v} reps`;
  calendar.appendChild(el);
 }
}

function drawTrend(byWeek){
 const c=trend,x=c.getContext("2d");
 x.clearRect(0,0,c.width,c.height);
 const e=Object.entries(byWeek).sort((a,b)=>a[0].localeCompare(b[0])).slice(-8);
 if(e.length<2)return;
 const v=e.map(i=>i[1]),max=Math.max(...v),min=Math.min(...v);
 const improving=v[v.length-1]>=v[0];
 x.strokeStyle=improving?"#31d07c":"#f5b942";
 x.lineWidth=3;x.beginPath();
 v.forEach((n,i)=>{
  const px=i*(c.width/(v.length-1));
  const py=c.height-((n-min)/(max-min||1))*c.height;
  i?x.lineTo(px,py):x.moveTo(px,py);
 });
 x.stroke();
}

function renderAchievements(total){
 achievements.innerHTML="";
 [500,1000,2500,5000].forEach(m=>{
  const d=document.createElement("div");
  d.className="badge"+(total>=m?" unlocked":"");
  d.innerHTML=`<div class="big">${m}</div><div class="label">Total Reps</div>`;
  achievements.appendChild(d);
 });
}

loadData();
</script>
</body>
</html>
